# Changelog

---
## [0.0.42](https://github.com/hedon954/goapm/compare/v0.0.41..v0.0.42) - 2025-02-21

optimize sqltrace span name and trace stack when redis error

### ‚õ∞Ô∏è Features

- **(redis&gorm)** optimize sqltrace span name and trace stack when redis error - ([95bef72](https://github.com/hedon954/goapm/commit/95bef72cb21adaaded6f463469ee0e5dc8299685)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.41](https://github.com/hedon954/goapm/compare/v0.0.40..v0.0.41) - 2025-02-21

fix gorm with wrapped driver and optimize redis cmd record info

### ‚öôÔ∏è Miscellaneous Chores

- remove panic test - ([8d5bb58](https://github.com/hedon954/goapm/commit/8d5bb580831ad99576da9c048553fb9bfb5dac23)) - hedon954

### ‚õ∞Ô∏è Features

- **(redis)** optimize redis cmd record info - ([0497d78](https://github.com/hedon954/goapm/commit/0497d78d921975feab79c152c3720b7254cb6d6c)) - hedon954

### üêõ Bug Fixes

- **(gorm)** new gorm mysql with wrapper driver - ([84678a5](https://github.com/hedon954/goapm/commit/84678a56770ae4c289850effe41b37b3c57ad064)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.40](https://github.com/hedon954/goapm/compare/v0.0.39..v0.0.40) - 2025-02-21

optimize redis hook

### ‚õ∞Ô∏è Features

- **(redis)** without stack trace and overide cmd when error - ([2de7307](https://github.com/hedon954/goapm/commit/2de7307fa7e262c9bf65831fc5fe0572759cf9c4)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.39](https://github.com/hedon954/goapm/compare/v0.0.38..v0.0.39) - 2025-02-20

set gin.Context into context for logrus

### ‚õ∞Ô∏è Features

- **(gin)** set gin.Context into context for logrus - ([fe4a163](https://github.com/hedon954/goapm/commit/fe4a1633145924986a15632a475aa653a3162b6c)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.38](https://github.com/hedon954/goapm/compare/v0.0.37..v0.0.38) - 2025-02-20

set trace in gin response header

### ‚õ∞Ô∏è Features

- **(gin)** set trace id in response header - ([2caff17](https://github.com/hedon954/goapm/commit/2caff17993461b3d93ef60c4926c134561f536af)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.37](https://github.com/hedon954/goapm/compare/v0.0.36..v0.0.37) - 2025-02-20

set trace id in gin context

### ‚õ∞Ô∏è Features

- **(gin)** set trace id in gin context - ([505b608](https://github.com/hedon954/goapm/commit/505b60877c6bcdd538e1af38840bcfb96fec88b7)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.36](https://github.com/hedon954/goapm/compare/v0.0.35..v0.0.36) - 2025-02-20

support option for recording response when logrus Error is called

### ‚öôÔ∏è Miscellaneous Chores

- nolint - ([c96f23d](https://github.com/hedon954/goapm/commit/c96f23d63d23eeb7bcead118934bd93fdd2ad674)) - hedon954

### ‚õ∞Ô∏è Features

- **(logrus&gin)** support option for recording response when logrus Error is called - ([f27468b](https://github.com/hedon954/goapm/commit/f27468b185d28b4247e8c4ddf06a1fd4d7237108)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.35](https://github.com/hedon954/goapm/compare/v0.0.34..v0.0.35) - 2025-02-20

optimize caller info

### ‚öôÔ∏è Miscellaneous Chores

- nolint - ([3c16349](https://github.com/hedon954/goapm/commit/3c16349f328349ddff711a7d42f0791395e595bb)) - hedon954

### ‚õ∞Ô∏è Features

- **(logrus)** optimize caller info - ([ce03e4a](https://github.com/hedon954/goapm/commit/ce03e4abb3f157844e6725d0313e7a80c8489635)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.34](https://github.com/hedon954/goapm/compare/v0.0.33..v0.0.34) - 2025-02-20

fix logrus caller var name from `callback` and return function name in caller

### üêõ Bug Fixes

- logrus caller name and content - ([becb37c](https://github.com/hedon954/goapm/commit/becb37c710f6568cf4a61b501f0d83c24618ae85)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.33](https://github.com/hedon954/goapm/compare/v0.0.32..v0.0.33) - 2025-02-20

change http attributes' keys for better show in aliyun open telementry

### ‚õ∞Ô∏è Features

- **(gin)** change http attributes' keys for better show in aliyun open telementry - ([52d9916](https://github.com/hedon954/goapm/commit/52d99162164893cd07c7fb0811f861b3d8bc7198)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.32](https://github.com/hedon954/goapm/compare/v0.0.31..v0.0.32) - 2025-02-20

add gin.Context param to formatResponse option func

### ‚õ∞Ô∏è Features

- **(gin)** add gin.Context to formatResponse option - ([36c708a](https://github.com/hedon954/goapm/commit/36c708ab75059bae0ffc3bd4ccbdbf5b36f8686b)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.31](https://github.com/hedon954/goapm/compare/v0.0.30..v0.0.31) - 2025-02-20

provide gin option to set response formatter

### ‚õ∞Ô∏è Features

- **(gin)** provide gin response format option - ([e59dd88](https://github.com/hedon954/goapm/commit/e59dd8854ba2ed52c785ef81769940e9bf9845e4)) - hedon954
- **(gin)** add some comments - ([6d0f61c](https://github.com/hedon954/goapm/commit/6d0f61c85d840f9e374543239c39a50a98085cee)) - hedon954

### üß™ Tests

- add benchmark for findcaller - ([0c3346f](https://github.com/hedon954/goapm/commit/0c3346f168cacf1e520e3ee838b641446385a334)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.30](https://github.com/hedon954/goapm/compare/v0.0.29..v0.0.30) - 2025-02-19

trace caller in logrus error

### ‚öôÔ∏è Miscellaneous Chores

- lint - ([d0e7265](https://github.com/hedon954/goapm/commit/d0e72651ee82c3c76d55699b0adadf423c46a753)) - hedon954

### ‚õ∞Ô∏è Features

- **(logrus)** find caller in logrus error - ([28bb98d](https://github.com/hedon954/goapm/commit/28bb98d79d8eb8f298362ccc88622cfd9026d1d7)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.29](https://github.com/hedon954/goapm/compare/v0.0.28..v0.0.29) - 2025-02-19

create child span from parent span if it exists in logrus context

### ‚õ∞Ô∏è Features

- **(logrus)** create child span from parent span if it exists - ([d3d4669](https://github.com/hedon954/goapm/commit/d3d46699433b86f2895783b85b36bfb1103729da)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.28](https://github.com/hedon954/goapm/compare/v0.0.27..v0.0.28) - 2025-02-19

create new span in logrus error hook

### ‚õ∞Ô∏è Features

- **(logrus)** create new span in logrus - ([dd42c9f](https://github.com/hedon954/goapm/commit/dd42c9fdea44071c92f79dd7d129415b0a94f024)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.27](https://github.com/hedon954/goapm/compare/v0.0.26..v0.0.27) - 2025-02-19

use sonic to marshal json

### ‚öôÔ∏è Miscellaneous Chores

- use sonic to marshal json - ([1d3084f](https://github.com/hedon954/goapm/commit/1d3084f4811fd59d2bb28bbfdd9b0af99f98a71b)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.25](https://github.com/hedon954/goapm/compare/v0.0.24..v0.0.25) - 2025-02-19

record gin request when pinned

### ‚õ∞Ô∏è Features

- **(gin)** record request param when pinned - ([13fa93f](https://github.com/hedon954/goapm/commit/13fa93f52c4a0a9ca126b3d187a4805db5439f62)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.24](https://github.com/hedon954/goapm/compare/v0.0.23..v0.0.24) - 2025-02-19

fix: gin pinned

### üêõ Bug Fixes

- **(gin)** pinned - ([286e141](https://github.com/hedon954/goapm/commit/286e141797ff458add8756d729e99c58ee503033)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.23](https://github.com/hedon954/goapm/compare/v0.0.22..v0.0.23) - 2025-02-19

modify gin panic hook param

### ‚õ∞Ô∏è Features

- **(gin)** modify panic hook param - ([d6f656c](https://github.com/hedon954/goapm/commit/d6f656cfa4f7fe24e40e31c92526c524e2f3fc85)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.22](https://github.com/hedon954/goapm/compare/v0.0.21..v0.0.22) - 2025-02-19

support record response in gin

### ‚õ∞Ô∏è Features

- **(gin)** support record response - ([66e9d8d](https://github.com/hedon954/goapm/commit/66e9d8dbca51465790a96dd3036ee20ec75a6c92)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.21](https://github.com/hedon954/goapm/compare/v0.0.20..v0.0.21) - 2024-12-06

support custom headers for grpc client to otel exporter

### ‚õ∞Ô∏è Features

- **(apm)** support custom headers for grpc client to otel exporter - ([dba88b6](https://github.com/hedon954/goapm/commit/dba88b64b5d1f1e6c8e6cf3ee59d60f9a962cbc1)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.20](https://github.com/hedon954/goapm/compare/v0.0.19..v0.0.20) - 2024-12-06

use `defer` instead of `close` for better readability

### üöú Refactor

- **(apm)** rename `closeFuncs` to `deferFuncs` - ([bab0d57](https://github.com/hedon954/goapm/commit/bab0d576350e1ecd2426f0873f9988e1a0772916)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.19](https://github.com/hedon954/goapm/compare/v0.0.18..v0.0.19) - 2024-12-05

remove gin panic logger and support optional provide gin otel panic hooks

### ‚õ∞Ô∏è Features

- **(gin)** support optional provide gin otel hooks - ([39089e4](https://github.com/hedon954/goapm/commit/39089e4dcc2971c749e869990d3d653e04adfb0a)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.18](https://github.com/hedon954/goapm/compare/v0.0.17..v0.0.18) - 2024-12-05

support custom sampler for otel exporter

### ‚õ∞Ô∏è Features

- support custom sampler for otel exporter - ([bcf9abe](https://github.com/hedon954/goapm/commit/bcf9abe958263dd3989af773de88ed6f69b083a7)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.17](https://github.com/hedon954/goapm/compare/v0.0.16..v0.0.17) - 2024-11-29

provide `Hotname` method to `Infra`

### ‚õ∞Ô∏è Features

- **(infra)** provide `Hostname` method to `Infra` - ([34cebb6](https://github.com/hedon954/goapm/commit/34cebb6d0c3658c0d7d297e06a5ac9dc3642a7a7)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.16](https://github.com/hedon954/goapm/compare/v0.0.15..v0.0.16) - 2024-11-29

support option args for `NewAPM` to provide custome resource and grpc token

### ‚öôÔ∏è Miscellaneous Chores

- add assets - ([376c6a9](https://github.com/hedon954/goapm/commit/376c6a9ae31e90df48850817d3803844337d64fc)) - hedon954

### ‚õ∞Ô∏è Features

- **(apm)** support option args for `NewAPM` to set otel resource and grpc token - ([04dd6e9](https://github.com/hedon954/goapm/commit/04dd6e930622f2847be20c94936d54f32ee26777)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.15](https://github.com/hedon954/goapm/compare/v0.0.14..v0.0.15) - 2024-11-12

provide more functions for `Infra`

### ‚õ∞Ô∏è Features

- **(goapm)** close redis and mysql after run all closers - ([1a6d79a](https://github.com/hedon954/goapm/commit/1a6d79a85e387f6bd596d04be74106335275ee12)) - hedon954
- **(goapm)** provide range functions for mysql and redis - ([1fe2faf](https://github.com/hedon954/goapm/commit/1fe2faf54741e2f1370fa73b529f56c9ff1acc7e)) - hedon954

### üìö Documentation

- **(apm)** add logs when connected mysql and redis - ([200d7d7](https://github.com/hedon954/goapm/commit/200d7d7bb9b0e6d001a79d1f00bb5dd931e4ba3b)) - hedon954
- **(goapm)** add more conmments for `Infra` struct - ([7ea3051](https://github.com/hedon954/goapm/commit/7ea3051a63df18d06839149f89023ef0264766f6)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.14](https://github.com/hedon954/goapm/compare/v0.0.13..v0.0.14) - 2024-11-12

refactor redis params to use redis.Option

### üöú Refactor

- move buildInfo from apm directory to root directory - ([4ee17bc](https://github.com/hedon954/goapm/commit/4ee17bc8fe738d2f7e2aabbd8b2946ac381824ca)) - hedon954
- change redis parans to use redis.Option - ([de0211f](https://github.com/hedon954/goapm/commit/de0211f36c7028d7c9dcfd1764fd48cd9f6c4021)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.13](https://github.com/hedon954/goapm/compare/v0.0.12..v0.0.13) - 2024-11-12

provide clearer error info when init infra failed

### Optimize

- **(goapm)** provide clearer error info when init infra failed - ([92fa1da](https://github.com/hedon954/goapm/commit/92fa1daec90bcde1d2ba40551d17eee40436ef67)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.12](https://github.com/hedon954/goapm/compare/v0.0.11..v0.0.12) - 2024-11-12

fix bug in create gorm by Infra

### üêõ Bug Fixes

- **(gorm)** fix wrong check for gorm creator - ([05dac84](https://github.com/hedon954/goapm/commit/05dac842ed8966904c22ec4645d980488ada04b7)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.11](https://github.com/hedon954/goapm/compare/v0.0.10..v0.0.11) - 2024-11-12

provider `WaitToStop` function for Infra to support graceful restart

### üöú Refactor

- **(goapm)** provider `WaitToStop` function for Infra to support graceful restart - ([2825159](https://github.com/hedon954/goapm/commit/2825159c8db1da19c2599439adb1cf1f15922def)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.10](https://github.com/hedon954/goapm/compare/v0.0.9..v0.0.10) - 2024-11-12

add logrus hook to handle error log with trace

### ‚õ∞Ô∏è Features

- **(logger)** add logrus hook to handle error log with trace - ([1d99402](https://github.com/hedon954/goapm/commit/1d99402825757a1ee403dc67f795ad22f74f6195)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.9](https://github.com/hedon954/goapm/compare/v0.0.8..v0.0.9) - 2024-11-12

create tablefilp as soon as with it

### üöú Refactor

- create tableflip as soon as with it - ([7da9ee8](https://github.com/hedon954/goapm/commit/7da9ee8f4b1379bf0f711036c8d8f6d48c690797)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.8](https://github.com/hedon954/goapm/compare/v0.0.7..v0.0.8) - 2024-11-12

fix bug in handling tableflip to exit when stop infra

### üêõ Bug Fixes

- **(tableflip)** hanlde tableflip to exit when close infra - ([76e0296](https://github.com/hedon954/goapm/commit/76e0296fbb843c06b32932b5ecd66cdac3f499ce)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.7](https://github.com/hedon954/goapm/compare/v0.0.6..v0.0.7) - 2024-11-12

support tablefilp and add more usefull functions to `goapm.Infra`

### ‚õ∞Ô∏è Features

- support tablefilp and add more usefull functions to `goapm.Infra` - ([3946515](https://github.com/hedon954/goapm/commit/39465157a7f35807daad24a3c25cfb250a141a31)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.6](https://github.com/hedon954/goapm/compare/v0.0.5..v0.0.6) - 2024-11-12

downgrade holmes version to 1.0.2

### ‚öôÔ∏è Miscellaneous Chores

- downgrade holmes version to 1.0.2 - ([efac648](https://github.com/hedon954/goapm/commit/efac6483a2024d227f50000049d4bc6fb1aac372)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.5](https://github.com/hedon954/goapm/compare/v0.0.4..v0.0.5) - 2024-11-12

downgrade dependencies

### ‚öôÔ∏è Miscellaneous Chores

- downgrade dependencies - ([e2a8495](https://github.com/hedon954/goapm/commit/e2a8495308a6260d3d0f6114268dcc71e359f87e)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.4](https://github.com/hedon954/goapm/compare/v0.0.3..v0.0.4) - 2024-11-12

downgrade otel to v1.27.0

### ‚öôÔ∏è Miscellaneous Chores

- downgrade otel - ([d2f83cc](https://github.com/hedon954/goapm/commit/d2f83ccc2452e0e60d5d239878cdc44fa3607b3e)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.3](https://github.com/hedon954/goapm/compare/v0.0.2..v0.0.3) - 2024-11-12

upgrade dependencies

### ‚öôÔ∏è Miscellaneous Chores

- upgrade dependencies - ([e54c659](https://github.com/hedon954/goapm/commit/e54c659e9ed04b5faabaf42677eaa5929eb0c7c2)) - hedon954

<!-- generated by git-cliff -->

---
## [0.0.2](https://github.com/hedon954/goapm/compare/v0.0.1..v0.0.2) - 2024-11-11

optimize README and Infra

### ‚õ∞Ô∏è Features

- **(infra)** provider `AppendCloser` function to handle close functions together - ([955c4cb](https://github.com/hedon954/goapm/commit/955c4cb1769d6f6e84fbe0faa9f94d6d2face08c)) - hedon954

### üìö Documentation

- **(readme)** add go reference badge icon - ([5173ab6](https://github.com/hedon954/goapm/commit/5173ab654f88b42001178b2dd88b008806b94f96)) - Hedon

<!-- generated by git-cliff -->

---
## [0.0.1] - 2024-10-31

Completed the base features of APM, wrapping common tools like Redis, MySQL, HTTP, Gin, and Gorm with OpenTelemetry, providing tracing, metrics, and logging capabilities.

### ‚öôÔ∏è Miscellaneous Chores

- push example protos - ([ec12785](https://github.com/hedon954/goapm/commit/ec127851ee54c1cc7456b43875c34324e49fc091)) - hedon954
- push goapm - ([0a0bd8e](https://github.com/hedon954/goapm/commit/0a0bd8ee1c68a6ed273844015af4301aebbc2b37)) - hedon954
- remove exmaples folder - ([9b7544b](https://github.com/hedon954/goapm/commit/9b7544bb40e978c6d93aa99b51487e2ff2a99d4d)) - hedon954

### ‚õ∞Ô∏è Features

- **(apm)** finsih goapm api - ([9c4adc2](https://github.com/hedon954/goapm/commit/9c4adc22273b6979135899c0c68a572e31b2b43e)) - hedon954
- **(ci)** upgrade golangci-lint in github action workflow - ([07b74de](https://github.com/hedon954/goapm/commit/07b74deca03608209515a2352d4baf6f0290a7cf)) - hedon954
- **(gin)** wrap gin with otel - ([09c3551](https://github.com/hedon954/goapm/commit/09c3551dc5c689579676070629d42ae2ad342f11)) - hedon954
- **(gorm)** provider gorm otel wrapper and add unit tests for it - ([9f156af](https://github.com/hedon954/goapm/commit/9f156afd61fafbf6277350a258db5c6df3a5c4da)) - hedon954
- **(grpc)** wrapper otel with grpc server and grpc server, and upgrade go version to 1.23.2 - ([8f4d6f9](https://github.com/hedon954/goapm/commit/8f4d6f99d98ff9b11bde5b764b8c866a05d07ca7)) - hedon954
- **(grpc)** support set options when create new grpc server and client - ([f62341c](https://github.com/hedon954/goapm/commit/f62341c76ee0b620e14b4db2deaf4939b4922ddf)) - hedon954
- **(http)** wrap http with otel - ([af6d447](https://github.com/hedon954/goapm/commit/af6d447f0df269c0f07425ee7bf8218b42a50e3d)) - hedon954
- **(redis)** wrap redis with otel - ([63920c3](https://github.com/hedon954/goapm/commit/63920c34dc6c5eec8a4c4125775b3fb1fb319d11)) - hedon954
- **(sql)** wrap sql.DB with otel trace, log and metric - ([1dfe87e](https://github.com/hedon954/goapm/commit/1dfe87ef59a7ff80435e689268c2857cf407b5d2)) - hedon954
- add db_utils - ([163ae45](https://github.com/hedon954/goapm/commit/163ae453e80301e1bf20e4a90064b11b581a139e)) - hedon954
- fix go mod error - ([6ad99cc](https://github.com/hedon954/goapm/commit/6ad99cca21815bc8af604b50032d98044b714363)) - hedon954
- http support metrics and heartbeat api default - ([2da750e](https://github.com/hedon954/goapm/commit/2da750e8f0c562512ca89ae7ecd0d6a77e13987c)) - hedon954

### üìö Documentation

- **(readme)** add architecture - ([6c70acb](https://github.com/hedon954/goapm/commit/6c70acbbcf00106a78291ecb0114e7a77270b221)) - hedon954
- **(readme)** add badges - ([d54a1ec](https://github.com/hedon954/goapm/commit/d54a1ecc314d194239df87fc9b01cdb716c7aa57)) - hedon954
- update readme - ([ed8cb97](https://github.com/hedon954/goapm/commit/ed8cb97a7f2f17b34b31ff291d501c9293e54b2f)) - hedon954

### üöú Refactor

- **(grpc)** expose Close method for grpcServer - ([4c61ae1](https://github.com/hedon954/goapm/commit/4c61ae1b67d633ace02aa87bb8d20f197fc67fde)) - hedon954
- **(grpc)** support to dynamic get grpc server address - ([6585414](https://github.com/hedon954/goapm/commit/6585414a60bc17dcac423d04a003b069fdc93897)) - hedon954
- check duplicated mysql, gorm and redis register - ([5f7bde4](https://github.com/hedon954/goapm/commit/5f7bde47699c3c4d0832efd203fa1b5c158158da)) - hedon954
- use `error` to replace `haserror` for jaeger ui show - ([8735900](https://github.com/hedon954/goapm/commit/8735900a9452d47e0a91ff652a09b8e19744a22e)) - hedon954

### üß™ Tests

- **(sql)** add unit tests for mysql wrapper driver - ([7a41351](https://github.com/hedon954/goapm/commit/7a4135161db373c0f339e7311b0994eaab73534b)) - hedon954

<!-- generated by git-cliff -->
